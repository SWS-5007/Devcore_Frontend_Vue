(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{a55b:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("external-layout",[e.form.busy?e._e():r("v-btn",{staticClass:"back-btn animated fadeIn",attrs:{icon:""},on:{click:e.previous}},[r("v-icon",[e._v("mdi-arrow-left")])],1),r("input",{ref:"focus",staticClass:"focus-placeholder",attrs:{type:"text",autofocus:""}}),r("v-container",{staticClass:"animated slideInRight faster",staticStyle:{padding:"0"},attrs:{"fill-height":""}},[r("v-form",{staticClass:"w-100 fill-height",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("v-stepper",{staticClass:"stepper",staticStyle:{"margin-top":"150px","box-shadow":"none",padding:"0"},attrs:{"show-arrows":!1,light:!0,height:"100%","hide-delimiters":"",continuous:!1},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("v-stepper-content",{attrs:{step:1}},[r("v-row",{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],ref:"username",staticClass:"large",attrs:{disabled:e.form.busy,name:"username",error:e.$validateState("username",e.form),"error-messages":e.$displayError("username",e.form),"aria-autocomplete":"new-username",placeholder:e.$t("Your email")},on:{blur:e.focusLost},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",color:"primary",rounded:""},on:{click:e.next}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+" "),r("v-icon",[e._v("mdi-arrow-right")])],1)],1)],1)],1),r("v-stepper-content",{attrs:{step:2}},[r("v-row",{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],ref:"password",staticClass:"large",attrs:{disabled:e.form.busy,name:"password",type:"password",color:"primary",error:e.$validateState("password",e.form),"error-messages":e.$displayError("password",e.form),"aria-autocomplete":"new-password",placeholder:e.$t("Your password")},on:{blur:e.focusLost},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",disabled:e.form.busy||e.vErrors.any(),loading:e.form.busy,color:"primary",rounded:""},on:{click:e.next}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+" "),r("v-icon",[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1),r("div",{staticClass:"text-center"},[r("router-link",{staticClass:"text-sm",attrs:{to:{name:"forgot-password"}}},[e._v(e._s(e.$t("Forgot your password?")))])],1)],1)],1)],1)},a=[],n=(r("7db0"),r("ac1f"),r("5319"),r("96cf"),r("1da1")),o=r("9fee"),i={data:function(){return{error:"",disable:!1,step:1,form:new o["a"]({username:"",password:"",remember:!0})}},mounted:function(){setTimeout((function(){document.querySelectorAll(".slider .wrapper .item")}),1)},computed:{nextBtnTxt:{get:function(){return this.step<2?"Next":"Login"}}},methods:{focusStep:function(){},previous:function(){1===this.step?this.$router.push({name:"home"}):(this.step--,this.stepChange(this.step))},next:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==this.step){e.next=6;break}return e.next=3,this.$validator.validate("username");case 3:this.vErrors.any()?this.$refs["username"].focus():(this.step++,this.stepChange(this.step)),e.next=9;break;case 6:return e.next=8,this.$validator.validate("password");case 8:this.vErrors.any()?this.$refs["password"].focus():this.login();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),stepChange:function(e){var t=this;try{setTimeout((function(){e>0&&!t.disable?t.$refs["password"].focus():t.$refs["username"].focus()}),100)}catch(r){}},focusLost:function(){try{this.$refs["focus"].focus()}catch(e){}},login:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.error="",e.next=4,this.$store.dispatch("auth/login",this.form);case 4:return this.disable=!0,e.next=7,this.$router.replace(this.$store.getters["app/intented_route"]||"/");case 7:e.next=18;break;case 9:if(e.prev=9,e.t0=e["catch"](0),!e.t0||!e.t0.code||"MUST_VERIFY_EMAIL"!==e.t0.code){e.next=16;break}return e.next=14,this.$router.push({name:"send-email-verification",query:{email:this.form.username}});case 14:e.next=17;break;case 16:e.t0&&e.t0.message&&(t="username",r=this.$validator.fields.find({name:t,scope:this.$options.scope}),r&&(this.$validator.errors.add({id:r.id,field:t,msg:e.t0.message,scope:this.$options.scope}),r.setFlags({invalid:!0,valid:!1,validated:!0})));case 17:this.previous();case 18:return e.prev=18,e.finish(18);case 20:case"end":return e.stop()}}),e,this,[[0,9,18,20]])})));function t(){return e.apply(this,arguments)}return t}()}},c=i,u=r("2877"),l=r("6544"),d=r.n(l),p=r("8336"),f=r("62ad"),m=r("a523"),h=r("4bd4"),v=r("132d"),x=r("0fd9"),w=r("7e85"),b=r("e516"),g=r("8654"),y=Object(u["a"])(c,s,a,!1,null,null,null);t["default"]=y.exports;d()(y,{VBtn:p["a"],VCol:f["a"],VContainer:m["a"],VForm:h["a"],VIcon:v["a"],VRow:x["a"],VStepper:w["a"],VStepperContent:b["a"],VTextField:g["a"]})},f243:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("external-layout",[e.form.busy?e._e():r("v-btn",{staticClass:"back-btn animated fadeIn",attrs:{icon:""},on:{click:e.previous}},[r("v-icon",[e._v("mdi-arrow-left")])],1),r("input",{ref:"focus",staticClass:"focus-placeholder",attrs:{type:"text",autofocus:""}}),r("v-container",{staticClass:"animated slideInRight faster",staticStyle:{padding:"0"},attrs:{"fill-height":""}},[r("v-form",{staticClass:"w-100 fill-height"},[r("v-stepper",{staticStyle:{"margin-top":"150px","box-shadow":"none",padding:"0"},attrs:{"show-arrows":!1,light:!0,"hide-delimiters":"",continuous:!1},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("v-stepper-content",{attrs:{step:0}},[r("v-form",{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),e.sendInstructions(t)}}},[r("v-row",{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],ref:"username",staticClass:"large",attrs:{disabled:e.form.busy,name:"username",error:e.$validateState("username",e.form),"error-messages":e.$displayError("username",e.form),"aria-autocomplete":"new-username",placeholder:e.$t("Your email")},on:{blur:e.focusLost},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",color:"primary",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,rounded:""},on:{click:e.sendInstructions}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+" "),r("v-icon",[e._v("mdi-arrow-right")])],1)],1),r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"text-center mt-4"},[r("router-link",{staticClass:"text-sm",attrs:{to:{name:"login"}}},[e._v(e._s(e.$t("Login")))])],1)])],1)],1)],1),r("v-stepper-content",{attrs:{step:1}},[r("v-form",{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),e.sendInstructions(t)}}},[r("v-row",{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|length:6",expression:"'required|length:6'"}],ref:"code",staticClass:"large",attrs:{disabled:e.form.busy,name:"code",type:"code",color:"primary",error:e.$validateState("code",e.form),"error-messages":e.$displayError("code",e.form),placeholder:e.$t("Received code")},on:{blur:e.focusLost},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),r("v-col",{attrs:{cols:"12"}},[e.showResend?r("p",{staticClass:"text-center"},[r("small",[e._v(" "+e._s(e.$t("Didn't get the email?"))+" "),r("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.resend(t)}}},[e._v(e._s(e.$t("Try again")))])])]):e._e(),r("v-btn",{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",disabled:e.form.busy||e.vErrors.any(),loading:e.form.busy,color:"primary",rounded:""},on:{click:e.verify}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+" "),r("v-icon",[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},a=[],n=(r("96cf"),r("1da1")),o=r("9fee"),i={data:function(){return{error:"",step:0,sent:!1,showResend:!1,haveCode:!1,form:new o["a"]({username:"",code:null})}},mounted:function(){var e=this;setTimeout((function(){e.$refs["username"].focus();var t=document.querySelectorAll(".slider .wrapper .item");for(var r in t)t[r]&&t[r].style&&(t[r].style.width=e.$refs["slider"].clientWidth+"px")}),1)},computed:{nextBtnTxt:{get:function(){return this.step<1?"Next":"Reset password"}}},methods:{focusLost:function(){try{this.$refs["focus"].focus()}catch(e){}},focusStep:function(){},previous:function(){0===this.step?this.$router.push({name:"login"}):(this.step--,this.stepChange(this.step))},next:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===this.step&&(this.step++,this.stepChange(this.step));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),stepChange:function(e){var t=this;setTimeout((function(){e>0?t.$refs["code"].focus():t.$refs["username"].focus()}),100)},verify:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$validator.validate("code");case 3:if(!this.vErrors.any()){e.next=6;break}return this.$refs["code"].focus(),e.abrupt("return");case 6:return this.$validator.reset(),e.next=9,this.$store.dispatch("auth/resetPassword",this.form);case 9:window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),"TOKEN_EXPIRED"===e.t0.code&&this.resend();case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}}),e,this,[[0,12,15,17]])})));function t(){return e.apply(this,arguments)}return t}(),resend:function(){this.$validator.reset(),this.previous()},sendInstructions:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$validator.validate("username");case 3:if(!this.vErrors.any()){e.next=6;break}return this.$refs["username"].focus(),e.abrupt("return");case 6:return this.$validator.reset(),this.form.fields.code=null,this.showResend=!1,e.next=11,this.$store.dispatch("auth/requestResetPassword",this.form);case 11:this.next(),this.sent=!0,setTimeout((function(){t.showResend=!0}),3e4),e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](0);case 18:return e.prev=18,this.$validator.reset(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,16,18,21]])})));function t(){return e.apply(this,arguments)}return t}()}},c=i,u=r("2877"),l=r("6544"),d=r.n(l),p=r("8336"),f=r("62ad"),m=r("a523"),h=r("4bd4"),v=r("132d"),x=r("0fd9"),w=r("7e85"),b=r("e516"),g=r("8654"),y=Object(u["a"])(c,s,a,!1,null,null,null);t["default"]=y.exports;d()(y,{VBtn:p["a"],VCol:f["a"],VContainer:m["a"],VForm:h["a"],VIcon:v["a"],VRow:x["a"],VStepper:w["a"],VStepperContent:b["a"],VTextField:g["a"]})}}]);
//# sourceMappingURL=login.42be19fb.js.map